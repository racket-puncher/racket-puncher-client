(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{9234:function(o,t,i){"use strict";i.r(t),i.d(t,{default:function(){return Login}});var r=i(9499),s=i(29),l=i(7794),p=i.n(l),d=i(7294),f=i(1150),h=i(7632),g=i(7536),x=i(6310),m=i(7533),n=function(o,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var i in t)t.hasOwnProperty(i)&&(o[i]=t[i])})(o,t)},k={display:"inline-block",padding:"0px",width:"222px",height:"49px",lineHeight:"49px",color:"rgb(60, 30, 30)",backgroundColor:"rgb(255, 235, 0)",border:"1px solid transparent",borderRadius:"3px",fontSize:"16px",textAlign:"center"},v=function(o){function a(){var t=null!==o&&o.apply(this,arguments)||this;return t.state={isLoggedIn:!1},t.onButtonClick=function(){var o,i=t.props,r=i.throughTalk,s=i.persistAccessToken,l=i.needProfile,p=void 0===l||l,d=i.useLoginForm,f=i.onSuccess,h=i.onFail;(null===(o=window.Kakao)||void 0===o?void 0:o.Auth)[void 0!==d&&d?"loginForm":"login"]({throughTalk:void 0===r||r,persistAccessToken:void 0===s||s,success:function(o){var i;t.setState({isLoggedIn:!0}),p?null===(i=window.Kakao)||void 0===i||i.API.request({url:"/v2/user/me",success:function(t){f({response:o,profile:t})},fail:h}):f({response:o})},fail:h})},t.onLogout=function(){var o;null===(o=window.Kakao)||void 0===o||o.Auth.logout(function(){var o,i,r;null===(i=(o=t.props).onLogout)||void 0===i||i.call(o,null===(r=window.Kakao)||void 0===r?void 0:r.Auth.getAccessToken()),t.setState({isLoggedIn:!1})})},t}return function(o,t){function e(){this.constructor=o}n(o,t),o.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}(a,o),a.prototype.componentDidMount=function(){var o,t,i,r;return o=this,t=void 0,i=void 0,r=function(){return function(o,t){var i,r,s,l,p={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return l={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function u(l){return function(d){return function(l){if(i)throw TypeError("Generator is already executing.");for(;p;)try{if(i=1,r&&(s=2&l[0]?r.return:l[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,l[1])).done)return s;switch(r=0,s&&(l=[2&l[0],s.value]),l[0]){case 0:case 1:s=l;break;case 4:return p.label++,{value:l[1],done:!1};case 5:p.label++,r=l[1],l=[0];continue;case 7:l=p.ops.pop(),p.trys.pop();continue;default:if(!(s=(s=p.trys).length>0&&s[s.length-1])&&(6===l[0]||2===l[0])){p=0;continue}if(3===l[0]&&(!s||l[1]>s[0]&&l[1]<s[3])){p.label=l[1];break}if(6===l[0]&&p.label<s[1]){p.label=s[1],s=l;break}if(s&&p.label<s[2]){p.label=s[2],p.ops.push(l);break}s[2]&&p.ops.pop(),p.trys.pop();continue}l=t.call(o,p)}catch(o){l=[6,o],r=0}finally{i=s=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,d])}}}(this,function(o){switch(o.label){case 0:return[4,new Promise(function(o,t){var i=document.createElement("script");i.id="kakao-sdk",i.src="//developers.kakao.com/sdk/js/kakao.min.js",i.onload=o,document.body.append(i)})];case 1:return o.sent(),window.Kakao.init(this.props.token),[2]}})},new(i||(i=Promise))(function(s,l){function a(o){try{c(r.next(o))}catch(o){l(o)}}function u(o){try{c(r.throw(o))}catch(o){l(o)}}function c(o){var t;o.done?s(o.value):((t=o.value)instanceof i?t:new i(function(o){o(t)})).then(a,u)}c((r=r.apply(o,t||[])).next())})},a.prototype.render=function(){var o=this.state.isLoggedIn?this.onLogout:this.onButtonClick,t=this.props,i=t.render,r=t.className,s=t.style,l=void 0===s?k:s,p=t.children,f=void 0===p?"카카오로 로그인하기":p;return"function"==typeof i?i({onClick:o}):d.createElement("button",{type:"button",className:void 0===r?"":r,onClick:o,style:l},f)},a.DEFAULT_STYLE=k,a}(d.PureComponent),y=i(7396),w=i(8381),j=i(8633),b=i(2268),_=i(528),Z=i(5314),P=i(9630),C=i(7820),O=i(9787),z=i(1111),I=i(3233),N=i(8031),S=i(3137),L=i(5893);function ownKeys(o,t){var i=Object.keys(o);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(o);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable})),i.push.apply(i,r)}return i}function _objectSpread(o){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(i),!0).forEach(function(t){(0,r.Z)(o,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(i,t))})}return o}var T=x.Ry().shape({email:x.Z_().required("이메일은 필수입니다.").matches(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,"이메일 형식이 올바르지 않습니다."),password:x.Z_().required("비밀번호는 필수입니다.")});function Login(){var o,t,i,r=(0,b.Z)().movePage,l=(0,I.Z)().setCookie,f=(0,N.Z)().setMessage,x=(0,g.cI)({resolver:(0,m.X)(T)}),k=x.register,j=x.handleSubmit,U=x.formState.errors,q=(0,d.useState)(!1),R=q[0],V=q[1],toggleModal=function(){V(function(o){return!o})},W=(o=(0,s.Z)(p().mark(function _callee(o){var t;return p().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,z.Z.login(o);case 3:l("accessToken",(t=i.sent).data.accessToken,{expires:7}),l("refreshToken",t.data.refreshToken),l("id",t.data.id),r("/main"),i.next=14;break;case 10:i.prev=10,i.t0=i.catch(0),console.log(i.t0),f("error",i.t0.response.data.message);case 14:case"end":return i.stop()}},_callee,null,[[0,10]])})),function(t){return o.apply(this,arguments)});return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(E,{children:[(0,L.jsx)(_.B,{children:"로그인"}),(0,L.jsxs)(A,{children:[(0,L.jsxs)(P.W,{children:[(0,L.jsx)("label",{htmlFor:"loginEmail",children:"이메일"}),(0,L.jsx)("input",_objectSpread({id:"loginEmail"},k("email"))),(0,L.jsx)(C.x,{children:null===(t=U.email)||void 0===t?void 0:t.message})]}),(0,L.jsxs)(P.W,{children:[(0,L.jsx)("label",{htmlFor:"loginPwd",children:"비밀번호"}),(0,L.jsx)("input",_objectSpread({id:"loginPwd",type:"password"},k("password"))),(0,L.jsx)(C.x,{children:null===(i=U.password)||void 0===i?void 0:i.message})]})]}),(0,L.jsxs)(F,{children:[(0,L.jsx)(M,{onClick:function(){return r("/findId")},children:"아이디찾기"}),(0,L.jsx)(M,{onClick:function(){return r("/findPwd")},children:"비밀번호 찾기"})]}),(0,L.jsxs)(B,{children:[(0,L.jsx)(K,{children:(0,L.jsx)(y.h$,{colorstyle:"is-black",onClick:j(W),children:"로그인"})}),(0,L.jsx)(K,{children:(0,L.jsx)(v,{token:"20bd45f114aff9ec8fee730fe2453f5c",onSuccess:function(o){console.log(o),o.response.accessToken,r("/main")},onFail:console.error,onLogout:console.info,render:function(o){var t=o.onClick;return(0,L.jsx)(y.h$,{colorstyle:"is-yellow",onClick:function(o){o.preventDefault(),t()},children:(0,L.jsxs)("div",{className:"align-box",children:[(0,L.jsx)(w.F,{width:"15px",height:"14px",children:(0,L.jsx)("img",{src:"".concat(O.O,"/images/kakao-icon.png"),alt:"kakao-icon"})}),(0,L.jsx)("p",{children:"카카오 로그인"})]})})}})})]}),(0,L.jsxs)(D,{children:[(0,L.jsx)("p",{children:"아이디가 없으신가요?"}),(0,L.jsx)(M,{onClick:function(){return r("/register")},children:"회원가입하기"})]}),(0,L.jsx)(Z.Z,{title:"test",isOpen:R,toggleModal:toggleModal,onOk:function(){console.log("확인")},onCancel:function(){console.log("취소")},footerButtons:[(0,L.jsx)("button",{onClick:toggleModal,children:"확인"},(0,h.Z)())],children:(0,L.jsx)("p",{children:"모달 테스트"})})]}),(0,L.jsx)(S.Z,{userNickname:"뉴뉴",siteUserId:"2"})]})}var E=f.ZP.div.withConfig({displayName:"login__LoginViewContainer",componentId:"sc-1jxzze8-0"})(["margin-top:50px;"]),A=f.ZP.div.withConfig({displayName:"login__InputContainer",componentId:"sc-1jxzze8-1"})(["margin-top:50px;"]),B=f.ZP.div.withConfig({displayName:"login__ButtonContainer",componentId:"sc-1jxzze8-2"})(["margin-top:40px;"]),K=f.ZP.div.withConfig({displayName:"login__ButtonBox",componentId:"sc-1jxzze8-3"})(["margin-bottom:20px;"]),F=f.ZP.div.withConfig({displayName:"login__UnderLineBox",componentId:"sc-1jxzze8-4"})(["display:flex;gap:15px;justify-content:flex-end;"]),M=f.ZP.p.withConfig({displayName:"login__UnderLineTexts",componentId:"sc-1jxzze8-5"})(["text-decoration:underline;color:",";cursor:pointer;"],j.K6),D=f.ZP.div.withConfig({displayName:"login__BottomUnderLineBox",componentId:"sc-1jxzze8-6"})(["display:flex;gap:10px;justify-content:center;"])},1111:function(o,t,i){"use strict";var r=i(1466),s=i(7795);t.Z={signup:function(o){return r.Z.post("/api/auth/signup",o)},login:function(o){return r.Z.post("/api/auth/signin",o)},uploadImgSignup:function(o){return console.log(o),s.Z.post("/api/auth/upload-image",o)},kakaoSignup:function(o){return r.Z.post("/api/auth/kakao/sign-up",o)},kakaoLogin:function(o){return r.Z.post("/api/auth/kakao/callback",o)},logout:function(o){return r.Z.post("/api/auth/sign-out",o)},checkNickname:function(o){return r.Z.post("/api/auth/check-email",o)},phoneVerify:function(o){return r.Z.post("/api/auth/phone-verify",o)},emailVerify:function(o){return r.Z.post("/api/auth/email-verify",o)},findId:function(o){return r.Z.post("/api/auth/id-find",o)},findPwd:function(o){return r.Z.post("/api/auth/password-reset",o)}}},7820:function(o,t,i){"use strict";i.d(t,{x:function(){return p}});var r=i(1150),s=i(3281),l=i(8633),p=r.ZP.p.withConfig({displayName:"text__InputErrorText",componentId:"sc-1vhg39e-0"})(["font-size:",";color:",";font-family:Pretendard-Regular;"],(0,s.hO)(l.Mz),l._W)},528:function(o,t,i){"use strict";i.d(t,{B:function(){return p}});var r=i(1150),s=i(3281),l=i(8633),p=r.ZP.h1.withConfig({displayName:"titles__PageMainTitle",componentId:"sc-1gishn9-0"})(["text-align:center;font-family:",";font-size:",";color:",";"],l.w9,(0,s.hO)("".concat(l.hQ)),l.SK)},3700:function(o,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return i(9234)}])}},function(o){o.O(0,[536,216,625,210,94,605,72,774,888,179],function(){return o(o.s=3700)}),_N_E=o.O()}]);