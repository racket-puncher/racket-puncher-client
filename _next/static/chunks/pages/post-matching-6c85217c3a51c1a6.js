(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[914],{4238:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return PostMatching}});var n=a(9499),i=a(29),r=a(7794),o=a.n(r),l=a(7294),c=a(7903),s=a(6310),d=a(7533),u=a(7536),m=a(1150),p=a(3281),h=a(8633),x=a(528),g=a(9630),j=a(8381),b=a(7396),_=a(3162),v=a(9787),f=a(546),T=a(7820),S=a(2319),y=a(2361),w=a(846),O=a(9970),E=a(8031),D=a(1111),N=a(3233),I=a(5893);function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(a),!0).forEach(function(t){(0,n.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var P=s.Ry().shape({postTitle:s.Z_().required("제목을 입력해주세요."),matchType:s.Z_().required("경기 유형을 선택해주세요."),numOfRecruited:s.Rx().required("모집 인원수를 선택해주세요."),selectedAge:s.Z_().required("모집 연령대를 선택해주세요."),selectedNTRP:s.Z_().required("모집할 NTRP를 선택해주세요."),matchDate:s.Z_().required("경기 날짜를 선택해주세요."),matchStartTime:s.Z_().required("경기 시작 시간을 선택해주세요."),matchEndTime:s.Z_().required("경기 종료 시간을 선택해주세요."),deadlineDate:s.Z_().required("모집 마감일을 선택해주세요."),deadlineTime:s.Z_().required("모집 마감 시간을 선택해주세요."),courtAddress:s.Z_().required("경기장 주소를 입력해주세요."),isCourtBooked:s.O7().required("경기장 예약 여부를 선택해주세요."),courtFee:s.Rx().required("경기장 대여료를 입력해주세요. (무료일 경우 0을 입력해주세요.)").min(0),locationImg:s.Z_(),mainText:s.Z_().required("본문 내용을 입력해주세요.")});function PostMatching(){var e,t,a,n,r,s,m,p,b,f,L=(0,u.cI)({resolver:(0,d.X)(P)}),G=L.register,H=L.handleSubmit,V=L.setValue,X=L.getValues,K=L.watch,z=L.formState.errors,U=(0,E.Z)().setMessage;(0,N.Z)().getCookie;var $=(0,l.useState)(null),J=$[0];$[1];var Q=(0,l.useState)(""),Y=Q[0];Q[1];var ee=(0,l.useState)(""),et=ee[0];ee[1];var ea=(0,l.useState)(""),en=ea[0];ea[1];var ei=(0,l.useState)(""),er=ei[0];ei[1];var eo=(0,l.useState)({address:"",lat:"",lon:""}),el=eo[0],ec=eo[1],es=(0,l.useState)(0),ed=es[0],eu=es[1],em=(0,l.useState)(null);em[0],em[1];var ep=(0,l.useState)([{value:null,label:"경기 유형을 먼저 선택해주세요."}]),eh=ep[0],ex=ep[1],selectHandler=function(e){"SINGLE"===e?ex([{value:2,label:"2 명"}]):ex([{value:4,label:"4 명"}])},eg=(0,l.useState)(!1),ej=eg[0],eb=eg[1],e_=(0,l.useRef)(null),ev=(0,l.useState)(null),ef=ev[0],eT=ev[1],eS=(0,l.useState)(null),ey=eS[0],ew=eS[1],eO={backgroundImage:"url(".concat(ey,")"),border:"1px solid ".concat(h.B_),borderRadius:"5px",height:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},eE=(e=(0,i.Z)(o().mark(function _callee(){var e,t,a;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(ey){n.next=3;break}return U("error","이미지를 추가해주세요."),n.abrupt("return");case 3:return console.log(e={title:X("postTitle"),matchingType:X("matchType"),recruitNum:X("numOfRecruited"),ageGroup:X("selectedAge"),ntrp:X("selectedNTRP"),matchingDate:X("matchDate"),matchingStartTime:X("matchStartTime"),matchingEndTime:X("matchEndTime"),recruitDueDate:X("deadlineDate"),recruitDueTime:X("deadlineTime"),location:X("courtAddress"),lat:"".concat(el.lat),lon:"".concat(el.lon),isReserved:X("isCourtBooked"),cost:X("courtFee"),content:X("mainText")}),n.prev=5,(t=new FormData).append("imageFile",ef),n.next=10,D.Z.uploadImg(t);case 10:return a=n.sent,n.next=13,c.Z.regMatchingData({params:t,body:_objectSpread(_objectSpread({},e),{},{locationImg:a.data.response})});case 13:n.sent,n.next=19;break;case 16:n.prev=16,n.t0=n.catch(5),console.log(n.t0);case 19:case"end":return n.stop()}},_callee,null,[[5,16]])})),function(){return e.apply(this,arguments)});return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(O.Z,{isOpen:ej,toggleDrawer:function(){return eb(function(e){return!e})},setCourtInfos:ec,setValue:V}),(0,I.jsx)(F,{children:(0,I.jsx)(x.B,{children:"매칭 글 등록"})}),(0,I.jsxs)(C,{onSubmit:H(eE),children:[(0,I.jsxs)(g.W,{children:[(0,I.jsx)("label",{htmlFor:"postTitle",children:"제목"}),(0,I.jsx)("input",_objectSpread(_objectSpread({id:"postTitle",type:"text"},G("postTitle")),{},{onChange:function(e){return V("postTitle",e.target.value)}})),(null===(t=z.postTitle)||void 0===t?void 0:t.message)&&(0,I.jsx)(T.x,{children:z.postTitle.message})]}),(0,I.jsxs)(Z,{children:[(0,I.jsxs)(g.W,{children:[(0,I.jsx)("label",{htmlFor:"matchType",children:"경기 유형"}),(0,I.jsx)(_.A,_objectSpread(_objectSpread({id:"matchType",options:[{value:"SINGLE",label:"단식"},{value:"DOUBLE",label:"복식"},{value:"MIXED_DOUBLE",label:"혼성 복식"}]},G("matchType")),{},{onChange:function(e){var t=e+"";V("matchType",t),eu("SINGLE"===t?2:4),selectHandler(t)}}))]}),(0,I.jsxs)(g.W,{children:[(0,I.jsx)("label",{htmlFor:"numOfRecruited",children:"모집 인원"}),(0,I.jsx)(_.A,_objectSpread(_objectSpread({id:"numOfRecruited",options:eh},G("numOfRecruited")),{},{onChange:function(e){return V("numOfRecruited",e)}}))]})]}),(0,I.jsxs)(Z,{children:[(0,I.jsxs)(g.W,{children:[(0,I.jsx)("label",{htmlFor:"selectedAge",children:"모집 연령대"}),(0,I.jsx)(_.A,{id:"selectedAge",options:[{value:"TEENAGER",label:"10대"},{value:"TWENTIES",label:"20대"},{value:"THIRTIES",label:"30대"},{value:"FORTIES",label:"40대"},{value:"FIFTIES",label:"50대"},{value:"SIXTIES",label:"60대"}],onChange:function(e){return V("selectedAge",e)}})]}),(0,I.jsxs)(g.W,{children:[(0,I.jsx)("label",{htmlFor:"selectedNTRP",children:"모집 NTRP"}),(0,I.jsx)(_.A,_objectSpread(_objectSpread({id:"selectedNTRP",options:[{value:"DEVELOPMENT",label:"NewBie (1.0 ~ 2.0)"},{value:"BEGINNER",label:"Beginner (2.5 ~ 3.5)"},{value:"INTERMEDIATE",label:"Intermediate (4.0 ~ 4.5)"},{value:"ADVANCED",label:"Advanced (5.0 ~ 5.5)"},{value:"PRO",label:"Pro (6.0 ~ 7.0)"}]},G("selectedNTRP")),{},{onChange:function(e){V("selectedNTRP",e)}}))]})]}),(0,I.jsxs)(g.W,{children:[(0,I.jsx)("label",{htmlFor:"matchDate",children:"경기일"}),(0,I.jsx)(S.Z,{name:"matchDate",setState:V}),(0,I.jsx)(M,_objectSpread(_objectSpread({type:"text",id:"matchDate",value:"".concat(J)},G("matchDate")),{},{readOnly:!0}))," ",(null===(a=z.matchDate)||void 0===a?void 0:a.message)&&(0,I.jsx)(T.x,{children:z.matchDate.message})]}),(0,I.jsxs)(Z,{children:[(0,I.jsxs)(g.W,{children:[(0,I.jsx)("label",{htmlFor:"matchStartTime",children:"시작 시간"}),(0,I.jsx)(y.Z,{name:"matchStartTime",setState:V,type:[!0,!0]}),(0,I.jsx)(M,_objectSpread(_objectSpread({type:"text",id:"matchStartTime",value:"".concat(Y)},G("matchStartTime")),{},{readOnly:!0})),(null===(n=z.matchStartTime)||void 0===n?void 0:n.message)&&(0,I.jsx)(T.x,{children:z.matchStartTime.message})]}),(0,I.jsxs)(g.W,{children:[(0,I.jsx)("label",{htmlFor:"matchEndTime",children:"종료 시간"}),(0,I.jsx)(y.Z,{name:"matchEndTime",setState:V,type:[!0,!0]}),(0,I.jsx)(M,_objectSpread(_objectSpread({type:"text",id:"matchEndTime",value:"".concat(et)},G("matchEndTime")),{},{readOnly:!0})),(null===(r=z.matchEndTime)||void 0===r?void 0:r.message)&&(0,I.jsx)(T.x,{children:z.matchEndTime.message})]})]}),(0,I.jsxs)(g.W,{children:[(0,I.jsx)("label",{htmlFor:"deadlineDnT",children:"모집 마감 기한"}),(0,I.jsxs)(Z,{children:[(0,I.jsx)(S.Z,{name:"deadlineDate",setState:V,matchDate:"".concat(en),type:[!0,!0,!0]}),(0,I.jsx)(M,_objectSpread(_objectSpread({type:"text",id:"deadlineDate",value:"".concat(en)},G("deadlineDate")),{},{readOnly:!0,onChange:function(e){V("deadlineDate",e.target.value),console.log(X("deadlineDate"))}})),(null===(s=z.deadlineDate)||void 0===s?void 0:s.message)&&(0,I.jsx)(T.x,{children:z.deadlineDate.message}),(0,I.jsx)(y.Z,{name:"deadlineTime",setState:V,type:[!0,!1]}),(0,I.jsx)(M,_objectSpread(_objectSpread({type:"text",id:"deadlineTime",value:"".concat(er)},G("deadlineTime")),{},{readOnly:!0})),(null===(m=z.deadlineTime)||void 0===m?void 0:m.message)&&(0,I.jsx)(T.x,{children:z.deadlineTime.message})]})]}),(0,I.jsxs)(g.W,{children:[(0,I.jsx)("label",{htmlFor:"courtAddress",children:"경기장 주소"}),(0,I.jsx)("input",_objectSpread(_objectSpread({type:"text",id:"courtAddress",defaultValue:"",value:"".concat(el.address)},G("courtAddress")),{},{onClick:function(e){e.preventDefault(),eb(!0)},readOnly:!0})),(null===(p=z.courtAddress)||void 0===p?void 0:p.message)&&(0,I.jsx)(T.x,{children:z.courtAddress.message})]}),(0,I.jsx)(Z,{children:(0,I.jsxs)(g.W,{children:[(0,I.jsx)("label",{htmlFor:"isCourtBooked",children:"경기장 예약 여부"}),(0,I.jsx)(w.Z,_objectSpread({idString:"isCourtBooked",setState:V},G("isCourtBooked")))]})}),(0,I.jsxs)(R,{children:[(0,I.jsxs)(A,{children:["1인당"," ",Number.isInteger(X("courtFee")/ed)?"".concat(X("courtFee")/ed):"-"," ","원"]}),(0,I.jsxs)(g.W,{children:[(0,I.jsx)("label",{htmlFor:"courtFee",children:"구장 대여비"}),(0,I.jsx)("input",_objectSpread(_objectSpread({type:"number",id:"courtFee",className:"text-align-right",pattern:"^[0-9]+$"},G("courtFee")),{},{onChange:function(e){return V("courtFee",Number(e.target.value))},onClick:function(){0===ed&&U("warning","경기 유형을 먼저 선택해주세요!")}})),(null===(b=z.courtFee)||void 0===b?void 0:b.message)&&(0,I.jsx)(T.x,{children:z.courtFee.message})]})]}),(0,I.jsxs)(g.W,{children:[(0,I.jsx)("label",{htmlFor:"courtPhoto",children:"경기장 이미지"}),(0,I.jsxs)(B,{onClick:function(){e_.current&&e_.current.click()},children:[(0,I.jsx)(W,{children:(0,I.jsx)(j.F,{width:"620px",height:"400px",children:ey?(0,I.jsx)("div",{className:"img-align-box",style:eO}):(0,I.jsx)(I.Fragment,{children:(0,I.jsx)("img",{src:"".concat(v.O,"/images/add-image-rectangle-00.png"),alt:"add-image"})})})}),(0,I.jsx)("input",{id:"courtPhoto",type:"file",style:{display:"none"},ref:e_,onChange:function(e){var t=e.target.files[0],a=new FileReader;a.onload=function(e){ew(e.target.result)},eT(t),a.readAsDataURL(t)},accept:"image/*",multiple:!0})]})]}),(0,I.jsxs)(g.W,{children:[(0,I.jsx)("label",{htmlFor:"mainText",children:"본문 내용"}),(0,I.jsx)(q,_objectSpread({id:"mainText",onChange:function(e){return V("mainText",e.target.value)},placeholder:"내용을 입력하세요."},G("mainText"))),(null===(f=z.mainText)||void 0===f?void 0:f.message)&&(0,I.jsx)(T.x,{children:z.mainText.message})]}),(0,I.jsx)(k,{colorstyle:"is-black",type:"submit",disabled:!(K("postTitle")&&K("matchType")&&K("numOfRecruited")&&K("selectedAge")&&K("selectedNTRP")&&K("matchDate")&&K("matchStartTime")&&K("matchEndTime")&&K("deadlineDate")&&K("deadlineTime")&&K("courtAddress")&&K("courtFee")&&K("mainText")),children:"등록하기"})]})]})}var F=m.ZP.div.withConfig({displayName:"post-matching__PageTitleArea",componentId:"sc-1gjxgpn-0"})(["margin:"," auto;"],(0,p.hO)("50px")),C=m.ZP.form.withConfig({displayName:"post-matching__PostMatchingForm",componentId:"sc-1gjxgpn-1"})(["display:flex;flex-direction:column;.input__InputBox-sc-w6l3ed-0{.text-align-right{text-align:right;}.select__CustomSelect-sc-10zdv74-0{margin-bottom:0px;}}"]),Z=m.ZP.div.withConfig({displayName:"post-matching__HalfContainer",componentId:"sc-1gjxgpn-2"})(["display:flex;flex-direction:row;gap:",";.input__InputBox-sc-w6l3ed-0{width:100%;.text-align-right{text-align:right;}}* .buttonRadio__RadioButton-sc-b6o1nr-1,* .select__CustomSelect-sc-10zdv74-0{margin-bottom:0px;}"],(0,p.hO)("20px")),R=m.ZP.div.withConfig({displayName:"post-matching__CourtFeeArea",componentId:"sc-1gjxgpn-3"})(["position:relative;width:100%;"]),A=m.ZP.span.withConfig({displayName:"post-matching__FeeForEachSpan",componentId:"sc-1gjxgpn-4"})(["position:absolute;top:",";right:",";max-width:",";white-space:nowrap;overflow:hidden;font-family:",";color:",";"],(0,p.hO)("3px"),(0,p.hO)("5px"),(0,p.hO)("150px"),h.bH,h.Ie),k=(0,m.ZP)(b.h$).withConfig({displayName:"post-matching__SubmitBtn",componentId:"sc-1gjxgpn-5"})(["margin:"," 0px;"],(0,p.hO)("30px")),B=m.ZP.div.withConfig({displayName:"post-matching__ImageSection",componentId:"sc-1gjxgpn-6"})(["display:flex;justify-content:center;cursor:pointer;min-width:100%;max-width:",";border:none;margin-bottom:",";background-color:",";img{max-width:100%;border-radius:5px;border:1px solid ",";overflow:hidden;}input{height:0px;!important;padding:0px;!important;}"],(0,p.hO)("620px"),(0,p.hO)("30px"),h._2,h.B_),W=m.ZP.div.withConfig({displayName:"post-matching__ImageContainer",componentId:"sc-1gjxgpn-7"})(["width:100%;"]),q=(0,m.ZP)(f.K).withConfig({displayName:"post-matching__MainTextArea",componentId:"sc-1gjxgpn-8"})(["max-width:",";height:",";"],(0,p.hO)("620px"),(0,p.hO)("400px")),M=m.ZP.input.withConfig({displayName:"post-matching__HiddenInput",componentId:"sc-1gjxgpn-9"})(["position:absolute;width:0px;height:0px;max-width:0px;max-height:0px;background-color:transparent;padding:0px;border:1px solid transparent;border-radius:0px;box-shadow:none;visibility:hidden;"])},3289:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/post-matching",function(){return a(4238)}])}},function(e){e.O(0,[885,536,244,216,625,222,160,601,774,888,179],function(){return e(e.s=3289)}),_N_E=e.O()}]);