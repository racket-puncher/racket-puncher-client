(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[914],{4238:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return PostMatching}});var a=n(9499),i=n(29),r=n(7794),o=n.n(r),s=n(7294),c=n(7903),d=n(6310),l=n(7533),u=n(7536),m=n(1150),p=n(3281),h=n(8633),x=n(528),g=n(9630),j=n(8381),b=n(7396),_=n(3162),f=n(9787),T=n(546),v=n(7820),S=n(2319),y=n(2361),w=n(846),O=n(9970),F=n(8031),P=n(1111),C=n(2268),Z=n(4013),D=n(5893);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var N=d.Ry().shape({postTitle:d.Z_().required("제목을 입력해주세요."),matchType:d.Z_().required("경기 유형을 선택해주세요."),numOfRecruited:d.Rx().required("모집 인원수를 선택해주세요."),selectedAge:d.Z_().required("모집 연령대를 선택해주세요."),selectedNTRP:d.Z_().required("모집할 NTRP를 선택해주세요."),matchDate:d.Z_().required("경기 날짜를 선택해주세요."),matchStartTime:d.Z_().required("경기 시작 시간을 선택해주세요."),matchEndTime:d.Z_().required("경기 종료 시간을 선택해주세요."),deadlineDate:d.Z_().required("모집 마감일을 선택해주세요."),deadlineTime:d.Z_().required("모집 마감 시간을 선택해주세요."),courtAddress:d.Z_().required("경기장 주소를 입력해주세요."),isCourtBooked:d.O7().required("경기장 예약 여부를 선택해주세요."),courtFee:d.Rx().required("경기장 대여료를 입력해주세요. (무료일 경우 0을 입력해주세요.)").min(0),locationImg:d.Z_(),mainText:d.Z_().required("본문 내용을 입력해주세요.")});function PostMatching(){var e,t,n,a,r,d,m,p,b,T,G=(0,u.cI)({resolver:(0,l.X)(N)}),K=G.register,V=(G.handleSubmit,G.setValue),X=G.getValues,z=G.watch,L=G.formState.errors,$=(0,C.Z)().replace,U=(0,F.Z)().setMessage,J=(0,s.useState)(null),Q=J[0];J[1];var Y=(0,s.useState)(""),ee=Y[0];Y[1];var et=(0,s.useState)(""),en=et[0];et[1];var ea=(0,s.useState)(""),ei=ea[0];ea[1];var er=(0,s.useState)(""),eo=er[0];er[1];var es=(0,s.useState)({address:"",lat:"",lon:""}),ec=es[0],ed=es[1],el=(0,s.useState)(0),eu=el[0],em=el[1],ep=(0,s.useState)([{value:null,label:"경기 유형을 먼저 선택해주세요."}]),eh=ep[0],ex=ep[1],selectHandler=function(e){"SINGLE"===e?ex([{value:2,label:"2 명"}]):ex([{value:4,label:"4 명"}])},eg=(0,s.useState)(!1),ej=eg[0],eb=eg[1],e_=(0,s.useRef)(null),ef=(0,s.useState)(null),eT=ef[0],ev=ef[1],eS=(0,s.useState)(null),ey=eS[0],ew=eS[1],eO={backgroundImage:"url(".concat(ey,")"),border:"1px solid ".concat(h.B_),borderRadius:"5px",height:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},eF=(e=(0,i.Z)(o().mark(function _callee(e){var t,n,a;return o().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(e.preventDefault(),ey){i.next=4;break}return U("error","이미지를 추가해주세요."),i.abrupt("return");case 4:return console.log(t={title:X("postTitle"),ageGroup:X("selectedAge"),matchingType:X("matchType"),ntrp:X("selectedNTRP"),location:X("courtAddress"),lat:"".concat(ec.lat),lon:"".concat(ec.lon),date:X("matchDate"),startTime:X("matchStartTime"),endTime:X("matchEndTime"),recruitDueDate:X("deadlineDate"),recruitDueTime:X("deadlineTime"),recruitNum:X("numOfRecruited"),cost:X("courtFee"),isReserved:X("isCourtBooked"),content:X("mainText")}),i.prev=6,(n=new FormData).append("imageFile",eT),i.next=11,P.Z.uploadImg(n);case 11:return a=i.sent,i.next=14,c.Z.regMatchingData({body:_objectSpread(_objectSpread({},t),{},{locationImg:a.data.response})});case 14:i.sent,$("/main"),U("success","등록되었습니다!"),i.next=22;break;case 19:i.prev=19,i.t0=i.catch(6),console.log(i.t0);case 22:case"end":return i.stop()}},_callee,null,[[6,19]])})),function(t){return e.apply(this,arguments)});return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(O.Z,{isOpen:ej,toggleDrawer:function(){return eb(function(e){return!e})},setCourtInfos:ed,setValue:V}),(0,D.jsx)(R,{children:(0,D.jsx)(x.B,{children:"매칭 글 등록"})}),(0,D.jsxs)(I,{onSubmit:eF,children:[(0,D.jsxs)(g.W,{children:[(0,D.jsx)("label",{htmlFor:"postTitle",children:"제목"}),(0,D.jsx)("input",_objectSpread(_objectSpread({id:"postTitle",type:"text"},K("postTitle")),{},{onChange:function(e){return V("postTitle",e.target.value)}})),(null===(t=L.postTitle)||void 0===t?void 0:t.message)&&(0,D.jsx)(v.x,{children:L.postTitle.message})]}),(0,D.jsxs)(k,{children:[(0,D.jsxs)(g.W,{children:[(0,D.jsx)("label",{htmlFor:"matchType",children:"경기 유형"}),(0,D.jsx)(_.A,_objectSpread(_objectSpread({id:"matchType",options:Z.Xf},K("matchType")),{},{onChange:function(e){var t=e+"";V("matchType",t),em("SINGLE"===t?2:4),selectHandler(t)}}))]}),(0,D.jsxs)(g.W,{children:[(0,D.jsx)("label",{htmlFor:"numOfRecruited",children:"모집 인원"}),(0,D.jsx)(_.A,_objectSpread(_objectSpread({id:"numOfRecruited",options:eh},K("numOfRecruited")),{},{onChange:function(e){return V("numOfRecruited",e)}}))]})]}),(0,D.jsxs)(k,{children:[(0,D.jsxs)(g.W,{children:[(0,D.jsx)("label",{htmlFor:"selectedAge",children:"모집 연령대"}),(0,D.jsx)(_.A,{id:"selectedAge",options:Z.IF,onChange:function(e){return V("selectedAge",e)}})]}),(0,D.jsxs)(g.W,{children:[(0,D.jsx)("label",{htmlFor:"selectedNTRP",children:"모집 NTRP"}),(0,D.jsx)(_.A,_objectSpread(_objectSpread({id:"selectedNTRP",options:Z.G_},K("selectedNTRP")),{},{onChange:function(e){V("selectedNTRP",e)}}))]})]}),(0,D.jsxs)(g.W,{children:[(0,D.jsx)("label",{htmlFor:"matchDate",children:"경기일"}),(0,D.jsx)(S.Z,{name:"matchDate",setState:V}),(0,D.jsx)(H,_objectSpread(_objectSpread({type:"text",id:"matchDate",value:"".concat(Q)},K("matchDate")),{},{readOnly:!0}))," ",(null===(n=L.matchDate)||void 0===n?void 0:n.message)&&(0,D.jsx)(v.x,{children:L.matchDate.message})]}),(0,D.jsxs)(k,{children:[(0,D.jsxs)(g.W,{children:[(0,D.jsx)("label",{htmlFor:"matchStartTime",children:"시작 시간"}),(0,D.jsx)(y.Z,{name:"matchStartTime",setState:V,type:[!0,!0]}),(0,D.jsx)(H,_objectSpread(_objectSpread({type:"text",id:"matchStartTime",value:"".concat(ee)},K("matchStartTime")),{},{readOnly:!0})),(null===(a=L.matchStartTime)||void 0===a?void 0:a.message)&&(0,D.jsx)(v.x,{children:L.matchStartTime.message})]}),(0,D.jsxs)(g.W,{children:[(0,D.jsx)("label",{htmlFor:"matchEndTime",children:"종료 시간"}),(0,D.jsx)(y.Z,{name:"matchEndTime",setState:V,type:[!0,!0]}),(0,D.jsx)(H,_objectSpread(_objectSpread({type:"text",id:"matchEndTime",value:"".concat(en)},K("matchEndTime")),{},{readOnly:!0})),(null===(r=L.matchEndTime)||void 0===r?void 0:r.message)&&(0,D.jsx)(v.x,{children:L.matchEndTime.message})]})]}),(0,D.jsxs)(g.W,{children:[(0,D.jsx)("label",{htmlFor:"deadlineDnT",children:"모집 마감 기한"}),(0,D.jsxs)(k,{children:[(0,D.jsx)(S.Z,{name:"deadlineDate",setState:V,matchDate:"".concat(ei),type:[!0,!0,!0]}),(0,D.jsx)(H,_objectSpread(_objectSpread({type:"text",id:"deadlineDate",value:"".concat(ei)},K("deadlineDate")),{},{readOnly:!0,onChange:function(e){V("deadlineDate",e.target.value),console.log(X("deadlineDate"))}})),(null===(d=L.deadlineDate)||void 0===d?void 0:d.message)&&(0,D.jsx)(v.x,{children:L.deadlineDate.message}),(0,D.jsx)(y.Z,{name:"deadlineTime",setState:V,type:[!0,!1]}),(0,D.jsx)(H,_objectSpread(_objectSpread({type:"text",id:"deadlineTime",value:"".concat(eo)},K("deadlineTime")),{},{readOnly:!0})),(null===(m=L.deadlineTime)||void 0===m?void 0:m.message)&&(0,D.jsx)(v.x,{children:L.deadlineTime.message})]})]}),(0,D.jsxs)(g.W,{children:[(0,D.jsx)("label",{htmlFor:"courtAddress",children:"경기장 주소"}),(0,D.jsx)("input",_objectSpread(_objectSpread({type:"text",id:"courtAddress",defaultValue:"",value:"".concat(ec.address)},K("courtAddress")),{},{onClick:function(e){e.preventDefault(),eb(!0)},readOnly:!0})),(null===(p=L.courtAddress)||void 0===p?void 0:p.message)&&(0,D.jsx)(v.x,{children:L.courtAddress.message})]}),(0,D.jsx)(k,{children:(0,D.jsxs)(g.W,{children:[(0,D.jsx)("label",{htmlFor:"isCourtBooked",children:"경기장 예약 여부"}),(0,D.jsx)(w.Z,_objectSpread({idString:"isCourtBooked",setState:V},K("isCourtBooked")))]})}),(0,D.jsxs)(A,{children:[(0,D.jsxs)(E,{children:["1인당"," ",Number.isInteger(X("courtFee")/eu)?"".concat(X("courtFee")/eu):"-"," ","원"]}),(0,D.jsxs)(g.W,{children:[(0,D.jsx)("label",{htmlFor:"courtFee",children:"구장 대여비"}),(0,D.jsx)("input",_objectSpread(_objectSpread({type:"number",id:"courtFee",className:"text-align-right",pattern:"^[0-9]+$"},K("courtFee")),{},{onChange:function(e){return V("courtFee",Number(e.target.value))},onClick:function(){0===eu&&U("warning","경기 유형을 먼저 선택해주세요!")}})),(null===(b=L.courtFee)||void 0===b?void 0:b.message)&&(0,D.jsx)(v.x,{children:L.courtFee.message})]})]}),(0,D.jsxs)(g.W,{children:[(0,D.jsx)("label",{htmlFor:"courtPhoto",children:"경기장 이미지"}),(0,D.jsxs)(W,{onClick:function(){e_.current&&e_.current.click()},children:[(0,D.jsx)(B,{children:(0,D.jsx)(j.F,{width:"620px",height:"400px",children:ey?(0,D.jsx)("div",{className:"img-align-box",style:eO}):(0,D.jsx)(D.Fragment,{children:(0,D.jsx)("img",{src:"".concat(f.O,"/images/add-image-rectangle-00.png"),alt:"add-image"})})})}),(0,D.jsx)("input",{id:"courtPhoto",type:"file",style:{display:"none"},ref:e_,onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onload=function(e){ew(e.target.result)},ev(t),n.readAsDataURL(t)},accept:"image/*",multiple:!0})]})]}),(0,D.jsxs)(g.W,{children:[(0,D.jsx)("label",{htmlFor:"mainText",children:"본문 내용"}),(0,D.jsx)(M,_objectSpread({id:"mainText",onChange:function(e){return V("mainText",e.target.value)},placeholder:"내용을 입력하세요."},K("mainText"))),(null===(T=L.mainText)||void 0===T?void 0:T.message)&&(0,D.jsx)(v.x,{children:L.mainText.message})]}),(0,D.jsx)(q,{colorstyle:"is-black",type:"submit",disabled:!(z("postTitle")&&z("matchType")&&z("numOfRecruited")&&z("selectedAge")&&z("selectedNTRP")&&z("matchDate")&&z("matchStartTime")&&z("matchEndTime")&&z("deadlineDate")&&z("deadlineTime")&&z("courtAddress")&&z("courtFee")&&z("mainText")),children:"등록하기"})]})]})}var R=m.ZP.div.withConfig({displayName:"post-matching__PageTitleArea",componentId:"sc-1gjxgpn-0"})(["margin:"," auto;"],(0,p.hO)("50px")),I=m.ZP.form.withConfig({displayName:"post-matching__PostMatchingForm",componentId:"sc-1gjxgpn-1"})(["display:flex;flex-direction:column;.input__InputBox-sc-w6l3ed-0{.text-align-right{text-align:right;}.select__CustomSelect-sc-10zdv74-0{margin-bottom:0px;}}"]),k=m.ZP.div.withConfig({displayName:"post-matching__HalfContainer",componentId:"sc-1gjxgpn-2"})(["display:flex;flex-direction:row;gap:",";.input__InputBox-sc-w6l3ed-0{width:100%;.text-align-right{text-align:right;}}* .buttonRadio__RadioButton-sc-b6o1nr-1,* .select__CustomSelect-sc-10zdv74-0{margin-bottom:0px;}"],(0,p.hO)("20px")),A=m.ZP.div.withConfig({displayName:"post-matching__CourtFeeArea",componentId:"sc-1gjxgpn-3"})(["position:relative;width:100%;"]),E=m.ZP.span.withConfig({displayName:"post-matching__FeeForEachSpan",componentId:"sc-1gjxgpn-4"})(["position:absolute;top:",";right:",";max-width:",";white-space:nowrap;overflow:hidden;font-family:",";color:",";"],(0,p.hO)("3px"),(0,p.hO)("5px"),(0,p.hO)("150px"),h.bH,h.Ie),q=(0,m.ZP)(b.h$).withConfig({displayName:"post-matching__SubmitBtn",componentId:"sc-1gjxgpn-5"})(["margin:"," 0px;"],(0,p.hO)("30px")),W=m.ZP.div.withConfig({displayName:"post-matching__ImageSection",componentId:"sc-1gjxgpn-6"})(["display:flex;justify-content:center;cursor:pointer;min-width:100%;max-width:",";border:none;margin-bottom:",";background-color:",";img{max-width:100%;border-radius:5px;border:1px solid ",";overflow:hidden;}input{height:0px;!important;padding:0px;!important;}"],(0,p.hO)("620px"),(0,p.hO)("30px"),h._2,h.B_),B=m.ZP.div.withConfig({displayName:"post-matching__ImageContainer",componentId:"sc-1gjxgpn-7"})(["width:100%;"]),M=(0,m.ZP)(T.K).withConfig({displayName:"post-matching__MainTextArea",componentId:"sc-1gjxgpn-8"})(["max-width:",";height:",";"],(0,p.hO)("620px"),(0,p.hO)("400px")),H=m.ZP.input.withConfig({displayName:"post-matching__HiddenInput",componentId:"sc-1gjxgpn-9"})(["position:absolute;width:0px;height:0px;max-width:0px;max-height:0px;background-color:transparent;padding:0px;border:1px solid transparent;border-radius:0px;box-shadow:none;visibility:hidden;"])},3289:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/post-matching",function(){return n(4238)}])}},function(e){e.O(0,[885,244,536,216,625,222,160,342,774,888,179],function(){return e(e.s=3289)}),_N_E=e.O()}]);